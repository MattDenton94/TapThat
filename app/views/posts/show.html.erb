<h1><%= @post.content %></h1>

<!-- Render the post's interests -->
<%= render 'post_interests/post_interest', post: @post %>

<!-- Form for adding a new interest to the post -->
<%= render 'post_interests/form', post: @post %>

<h2>Likes</h2>

<!-- Display the number of likes -->
<p>Total Likes: <%= @post.likes.count %></p>

<!-- Like/Unlike button -->
<% if @post.likes.exists?(user_id: current_user.id) %>
  <%= link_to 'Unlike', post_like_path(@post, @post.likes.find_by(user: current_user)), data: {turbo_method: :delete}, class: 'btn btn-danger' %>
<% else %>
  <%= link_to 'Like', post_likes_path(@post), data: {turbo_method: :post}, class: 'btn btn-primary' %>
<% end %>

<h2>Interests</h2>
<%= simple_form_for [@post, PostInterest.new] do |f| %>
  <%= f.input :interest_id, collection: Interest.all.collect { |i| [i.name, i.id] }, prompt: 'Select Interest' %>
  <%= f.button :submit, 'Add Interest', class: 'btn btn-success' %>
<% end %>

<%= link_to 'Back to Posts', posts_path %>
